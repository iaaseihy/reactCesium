/*! For license information please see measureText.js.LICENSE.txt */
var getCSSValue=function(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},measureText=function(e,t,a,l){var n=e.measureText(t),i=getCSSValue(e.canvas,"font-family"),o=getCSSValue(e.canvas,"font-size").replace("px",""),r=getCSSValue(e.canvas,"font-style"),s=getCSSValue(e.canvas,"font-weight"),d=!/\S/.test(t);n.fontsize=o;var u=document.createElement("div");u.style.position="absolute",u.style.opacity=0,u.style.font=r+" "+s+" "+o+"px "+i,u.innerHTML=t+"<br/>"+t,document.body.appendChild(u),n.leading=1.2*o;var c=getCSSValue(u,"height");if((c=c.replace("px",""))>=2*o&&(n.leading=c/2|0),document.body.removeChild(u),d)n.ascent=0,n.descent=0,n.bounds={minx:0,maxx:n.width,miny:0,maxy:0},n.height=0;else{var f=document.createElement("canvas"),y=100;f.width=n.width+y,f.height=3*o,f.style.opacity=1,f.style.fontFamily=i,f.style.fontSize=o,f.style.fontStyle=r,f.style.fontWeight=s;var m=f.getContext("2d");m.font=r+" "+s+" "+o+"px "+i;var h=f.width,g=f.height,v=g/2;m.fillStyle="white",m.fillRect(-1,-1,h+2,g+2),a&&(m.strokeStyle="black",m.lineWidth=e.lineWidth,m.strokeText(t,50,v)),l&&(m.fillStyle="black",m.fillText(t,50,v));for(var x=m.getImageData(0,0,h,g).data,S=0,p=4*h,C=x.length;++S<C&&255===x[S];);var b=S/p|0;for(S=C-1;--S>0&&255===x[S];);var V=S/p|0;for(S=0;S<C&&255===x[S];)(S+=p)>=C&&(S=S-C+4);var w=S%p/4|0,T=1;for(S=C-3;S>=0&&255===x[S];)(S-=p)<0&&(S=C-3-4*T++);var k=S%p/4+1|0;n.ascent=v-b,n.descent=V-v,n.bounds={minx:w-50,maxx:k-50,miny:0,maxy:V-b},n.height=V-b+1}return n};export default measureText;