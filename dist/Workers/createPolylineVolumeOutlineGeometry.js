define(["./when-208fe5b0","./Cartesian2-8417ca3d","./arrayRemoveDuplicates-0f62a181","./BoundingRectangle-7ee12c46","./Transforms-a73b3b3b","./ComponentDatatype-9204e9f6","./PolylineVolumeGeometryLibrary-a2a20b2b","./Check-d18af7c4","./GeometryAttribute-04a19cfe","./GeometryAttributes-b0b294d8","./IndexDatatype-d47ad6f6","./Math-4e53b694","./PolygonPipeline-bfd1975b","./RuntimeError-7f634f5d","./WebGLConstants-76bb35d1","./EllipsoidTangentPlane-9123a53b","./IntersectionTests-7d224a2f","./Plane-4aa8974d","./PolylinePipeline-232a4d9a","./EllipsoidGeodesic-8015072b","./EllipsoidRhumbLine-8cb2e5a4"],(function(e,i,n,a,t,r,o,l,s,p,d,u,c,y,h,f,g,m,b,E,v){"use strict";function P(n){var a=(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).polylinePositions,t=n.shapePositions;this._positions=a,this._shape=t,this._ellipsoid=i.Ellipsoid.clone(e.defaultValue(n.ellipsoid,i.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(n.cornerType,o.CornerType.ROUNDED),this._granularity=e.defaultValue(n.granularity,u.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry",a=1+a.length*i.Cartesian3.packedLength,a+=1+t.length*i.Cartesian2.packedLength,this.packedLength=a+i.Ellipsoid.packedLength+2}P.pack=function(n,a,t){var r;t=e.defaultValue(t,0);var o=n._positions,l=o.length;for(a[t++]=l,r=0;r<l;++r,t+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,t);var s=n._shape;l=s.length;for(a[t++]=l,r=0;r<l;++r,t+=i.Cartesian2.packedLength)i.Cartesian2.pack(s[r],a,t);return i.Ellipsoid.pack(n._ellipsoid,a,t),t+=i.Ellipsoid.packedLength,a[t++]=n._cornerType,a[t]=n._granularity,a};var _=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),k={polylinePositions:void 0,shapePositions:void 0,ellipsoid:_,height:void 0,cornerType:void 0,granularity:void 0};P.unpack=function(n,a,t){a=e.defaultValue(a,0);for(var r=n[a++],o=new Array(r),l=0;l<r;++l,a+=i.Cartesian3.packedLength)o[l]=i.Cartesian3.unpack(n,a);r=n[a++];var s=new Array(r);for(l=0;l<r;++l,a+=i.Cartesian2.packedLength)s[l]=i.Cartesian2.unpack(n,a);var p=i.Ellipsoid.unpack(n,a,_);a+=i.Ellipsoid.packedLength;var d=n[a++],u=n[a];return e.defined(t)?(t._positions=o,t._shape=s,t._ellipsoid=i.Ellipsoid.clone(p,t._ellipsoid),t._cornerType=d,t._granularity=u,t):(k.polylinePositions=o,k.shapePositions=s,k.cornerType=d,k.granularity=u,new P(k))};var C=new a.BoundingRectangle;return P.createGeometry=function(e){var l=e._positions,u=n.arrayRemoveDuplicates(l,i.Cartesian3.equalsEpsilon),y=e._shape;y=o.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(y);if(!(u.length<2||y.length<3))return c.PolygonPipeline.computeWindingOrder2D(y)===c.WindingOrder.CLOCKWISE&&y.reverse(),l=a.BoundingRectangle.fromPoints(y,C),function(e,i){var n=new p.GeometryAttributes;n.position=new s.GeometryAttribute({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var a=i.length,o=(i=n.position.values.length/3,e.length/3/a),l=d.IndexDatatype.createTypedArray(i,2*a*(1+o)),u=0,c=0,y=c*a;for(g=0;g<a-1;g++)l[u++]=g+y,l[u++]=g+y+1;for(l[u++]=a-1+y,l[u++]=y,y=(c=o-1)*a,g=0;g<a-1;g++)l[u++]=g+y,l[u++]=g+y+1;for(l[u++]=a-1+y,l[u++]=y,c=0;c<o-1;c++)for(var h=a*c,f=h+a,g=0;g<a;g++)l[u++]=g+h,l[u++]=g+f;return new s.Geometry({attributes:n,indices:d.IndexDatatype.createTypedArray(i,l),boundingSphere:t.BoundingSphere.fromVertices(e),primitiveType:s.PrimitiveType.LINES})}(o.PolylineVolumeGeometryLibrary.computePositions(u,y,l,e,!1),y)},function(n,a){return(n=e.defined(a)?P.unpack(n,a):n)._ellipsoid=i.Ellipsoid.clone(n._ellipsoid),P.createGeometry(n)}}));