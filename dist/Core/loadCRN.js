import when from"../ThirdParty/when.js";import CompressedTextureBuffer from"./CompressedTextureBuffer.js";import defined from"./defined.js";import DeveloperError from"./DeveloperError.js";import Resource from"./Resource.js";import TaskProcessor from"./TaskProcessor.js";var transcodeTaskProcessor=new TaskProcessor("transcodeCRNToDXT");function loadCRN(e){if(!defined(e))throw new DeveloperError("resourceOrUrlOrBuffer is required.");var r;e instanceof ArrayBuffer||ArrayBuffer.isView(e)?r=when.resolve(e):r=Resource.createIfNeeded(e).fetchArrayBuffer();if(defined(r))return r.then((function(e){if(defined(e)){var r=[];return e instanceof ArrayBuffer?r.push(e):(0===e.byteOffset&&e.byteLength===e.buffer.byteLength||(e=e.slice(0,e.length)),r.push(e.buffer)),transcodeTaskProcessor.scheduleTask(e,r)}})).then((function(e){return CompressedTextureBuffer.clone(e)}))}export default loadCRN;