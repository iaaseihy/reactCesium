import when from"../ThirdParty/when.js";import Check from"./Check.js";import defaultValue from"./defaultValue.js";import defined from"./defined.js";import Resource from"./Resource.js";function loadImageFromTypedArray(e){var r=e.uint8Array,t=e.format,o=e.request,n=defaultValue(e.flipY,!1);Check.typeOf.object("uint8Array",r),Check.typeOf.string("format",t);var a,i=new Blob([r],{type:t});return Resource.supportsImageBitmapOptions().then((function(e){return e?when(Resource.createImageBitmapFromBlob(i,{flipY:n,premultiplyAlpha:!1})):(a=window.URL.createObjectURL(i),new Resource({url:a,request:o}).fetchImage({flipY:n}))})).then((function(e){return defined(a)&&window.URL.revokeObjectURL(a),e})).otherwise((function(e){return defined(a)&&window.URL.revokeObjectURL(a),when.reject(e)}))}export default loadImageFromTypedArray;